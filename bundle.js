!function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e,n,t){"use strict";e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t=function(e,n){var t=e[1]||"",r=e[3];if(!r)return t;if(n&&"function"==typeof btoa){var i=(s=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[t].concat(o).concat([i]).join("\n")}var s,a,c;return[t].join("\n")}(n,e);return n[2]?"@media ".concat(n[2]," {").concat(t,"}"):t})).join("")},n.i=function(e,t,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);r&&i[c[0]]||(t&&(c[2]?c[2]="".concat(t," and ").concat(c[2]):c[2]=t),n.push(c))}},n}},function(e,n,t){"use strict";t.r(n);t(2),t(3)},function(e,n){(new class{constructor(){this.moves=0,this.moves_disabled=!1,this.grid=[],this.grid_el=document.getElementById("grid"),this.controls=document.getElementById("controls")}init(){this.initGrid();const e=document.createElement("button");e.id="restart",e.innerHTML="Перемешать",e.addEventListener("click",this.restart.bind(this)),this.controls.appendChild(e)}initGrid(){this.moves_disabled=!1;for(let e=1;e<=15;e++){const n=document.createElement("div");n.className="tile",n.innerHTML=String(e),n.addEventListener("click",this.handleTileClick.bind(this)),this.grid.push({val:String(e),el:n})}const e=document.createElement("div");e.className="tile tile-blank",e.innerHTML="",this.grid.push({val:"",el:e}),this.shuffle(),this.drawGrid()}makeMove(e,n,t=!0){this.moves_disabled||([this.grid[e],this.grid[n]]=[this.grid[n],this.grid[e]],t&&(this.moves++,this.drawGrid(),this.checkVictory()&&this.win()))}drawGrid(){this.grid_el.innerHTML="";for(let e=0;e<4;e++)for(let n=0;n<4;n++){let t=this.grid[4*e+n];t.el.style.top=String(130*e)+"px",t.el.style.left=String(130*n)+"px",this.grid_el.appendChild(t.el)}}checkVictory(){for(let e=0;e<this.grid.length;e++)if((15!==e||""!==this.grid[e].val)&&Number(this.grid[e].val)!==e+1)return!1;return!0}win(){const e=document.createElement("h2"),n=document.createElement("span"),t=document.createElement("div");e.id="victory-head",e.innerHTML="Победа!",n.className="victory-text",n.innerHTML="Ходов сделано: "+this.moves,t.id="victory-container",t.appendChild(e),t.appendChild(n),this.moves_disabled=!0,this.controls.insertBefore(t,this.controls.firstChild)}restart(){document.getElementById("victory-container").remove(),this.grid=[],this.moves=0,this.initGrid()}handleTileClick(e){const n=e.target,t=this.getByValue(n.innerHTML),r=this.getNeighbours(t);this.isTileMovable(r)&&this.makeMove(t,this.getEmpty())}isTileMovable(e){for(let n=0;n<e.length;n++)if(!e[n].val)return!0;return!1}getByValue(e){return this.grid.findIndex(n=>n.val===e)}getEmpty(){return this.grid.findIndex(e=>""===e.val)}getNeighbours(e){const n=[];return e<=11&&n.push(this.grid[e+4]),(e+1)%4!=0&&n.push(this.grid[e+1]),e>=4&&n.push(this.grid[e-4]),e%4!=0&&n.push(this.grid[e-1]),n}shuffle(){let e;for(let e=0;e<=1e3;e++)this.makeShuffleMove();for(e=this.getEmpty();(e+1)%4!=0;)this.makeMove(e,e+1,!1),e+=1;for(;e<=11;)this.makeMove(e,e+4,!1),e+=4}makeShuffleMove(){const e=this.getEmpty(),n=this.getNeighbours(e);let t=Math.floor(Math.random()*n.length);this.makeMove(e,this.getByValue(n[t].val),!1)}}).init()},function(e,n,t){var r=t(4),i=t(5);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,n,t){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}e[n]=t}return e[n]}}(),s=[];function a(e){for(var n=-1,t=0;t<s.length;t++)if(s[t].identifier===e){n=t;break}return n}function c(e,n){for(var t={},r=[],i=0;i<e.length;i++){var o=e[i],c=n.base?o[0]+n.base:o[0],l=t[c]||0,d="".concat(c," ").concat(l);t[c]=l+1;var u=a(d),f={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(s[u].references++,s[u].updater(f)):s.push({identifier:d,updater:m(f,n),references:1}),r.push(d)}return r}function l(e){var n=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=t.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){n.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(n);else{var s=o(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(n)}return n}var d,u=(d=[],function(e,n){return d[e]=n,d.filter(Boolean).join("\n")});function f(e,n,t,r){var i=t?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=u(n,i);else{var o=document.createTextNode(i),s=e.childNodes;s[n]&&e.removeChild(s[n]),s.length?e.insertBefore(o,s[n]):e.appendChild(o)}}function A(e,n,t){var r=t.css,i=t.media,o=t.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var h=null,p=0;function m(e,n){var t,r,i;if(n.singleton){var o=p++;t=h||(h=l(n)),r=f.bind(null,t,o,!1),i=f.bind(null,t,o,!0)}else t=l(n),r=A.bind(null,t,n),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)};return r(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;r(e=n)}else i()}}e.exports=function(e,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=i());var t=c(e=e||[],n);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<t.length;r++){var i=a(t[r]);s[i].references--}for(var o=c(e,n),l=0;l<t.length;l++){var d=a(t[l]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}t=o}}}},function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r)()(!0);i.push([e.i,"html {\r\n  font-family: Verdana,Geneva,sans-serif;\r\n}\r\n\r\n#game {\r\n  display: flex;\r\n}\r\n\r\n#grid {\r\n  width: 518px;\r\n  height: 518px;\r\n  position: relative;\r\n}\r\n\r\n.tile {\r\n  width: 128px;\r\n  height: 128px;\r\n  position: absolute;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  border: 1px solid black;\r\n  border-radius: 5px;\r\n}\r\n\r\n.tile-blank {\r\n  border: none;\r\n}\r\n\r\n#controls {\r\n  width: 250px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-left: 50px;\r\n}\r\n\r\n#victory-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n#restart {\r\n  padding: 4px 15px;\r\n  border: 1px solid black;\r\n  border-radius: 5px;\r\n  background: transparent;\r\n  font-size: 17px;\r\n  cursor: pointer;\r\n}\r\n\r\n.victory-text {\r\n  margin-bottom: 20px;\r\n}","",{version:3,sources:["webpack://src/style.css"],names:[],mappings:"AAAA;EACE,sCAAsC;AACxC;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,kBAAkB;EAClB,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,sBAAsB;EACtB,uBAAuB;EACvB,kBAAkB;AACpB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,sBAAsB;EACtB,uBAAuB;EACvB,mBAAmB;EACnB,iBAAiB;AACnB;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,uBAAuB;EACvB,mBAAmB;AACrB;;AAEA;EACE,iBAAiB;EACjB,uBAAuB;EACvB,kBAAkB;EAClB,uBAAuB;EACvB,eAAe;EACf,eAAe;AACjB;;AAEA;EACE,mBAAmB;AACrB",sourcesContent:["html {\r\n  font-family: Verdana,Geneva,sans-serif;\r\n}\r\n\r\n#game {\r\n  display: flex;\r\n}\r\n\r\n#grid {\r\n  width: 518px;\r\n  height: 518px;\r\n  position: relative;\r\n}\r\n\r\n.tile {\r\n  width: 128px;\r\n  height: 128px;\r\n  position: absolute;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  border: 1px solid black;\r\n  border-radius: 5px;\r\n}\r\n\r\n.tile-blank {\r\n  border: none;\r\n}\r\n\r\n#controls {\r\n  width: 250px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-left: 50px;\r\n}\r\n\r\n#victory-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n#restart {\r\n  padding: 4px 15px;\r\n  border: 1px solid black;\r\n  border-radius: 5px;\r\n  background: transparent;\r\n  font-size: 17px;\r\n  cursor: pointer;\r\n}\r\n\r\n.victory-text {\r\n  margin-bottom: 20px;\r\n}"],sourceRoot:""}]),n.default=i}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlLmNzcz83MTYzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUuY3NzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwidXNlU291cmNlTWFwIiwibGlzdCIsInRvU3RyaW5nIiwidGhpcyIsIm1hcCIsIml0ZW0iLCJjb250ZW50IiwiY3NzTWFwcGluZyIsImJ0b2EiLCJzb3VyY2VNYXBwaW5nIiwic291cmNlTWFwIiwiYmFzZTY0IiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsImNvbmNhdCIsInNvdXJjZVVSTHMiLCJzb3VyY2VzIiwic291cmNlIiwic291cmNlUm9vdCIsImpvaW4iLCJjc3NXaXRoTWFwcGluZ1RvU3RyaW5nIiwibWVkaWFRdWVyeSIsImRlZHVwZSIsImFscmVhZHlJbXBvcnRlZE1vZHVsZXMiLCJsZW5ndGgiLCJpZCIsIl9pIiwicHVzaCIsIm1vdmVzIiwibW92ZXNfZGlzYWJsZWQiLCJncmlkIiwiZ3JpZF9lbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250cm9scyIsImluaXRHcmlkIiwicmVzdGFydF9idG4iLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlc3RhcnQiLCJhcHBlbmRDaGlsZCIsIm5ld19lbCIsImNsYXNzTmFtZSIsIlN0cmluZyIsImhhbmRsZVRpbGVDbGljayIsInZhbCIsImVsIiwiYmxhbmtfZWwiLCJzaHVmZmxlIiwiZHJhd0dyaWQiLCJ0aWxlXzEiLCJ0aWxlXzIiLCJieV9wbGF5ZXIiLCJjaGVja1ZpY3RvcnkiLCJ3aW4iLCJqIiwidGlsZSIsInN0eWxlIiwidG9wIiwibGVmdCIsIk51bWJlciIsImhlYWRlciIsImNvbnRhaW5lciIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJyZW1vdmUiLCJlIiwidGFyZ2V0IiwidGlsZV9pIiwiZ2V0QnlWYWx1ZSIsIm5laWdoYm91cnMiLCJnZXROZWlnaGJvdXJzIiwiaXNUaWxlTW92YWJsZSIsIm1ha2VNb3ZlIiwiZ2V0RW1wdHkiLCJmaW5kSW5kZXgiLCJyZXN1bHQiLCJlbXB0eV9pIiwibWFrZVNodWZmbGVNb3ZlIiwicmFuZG9tIiwiTWF0aCIsImZsb29yIiwiaW5pdCIsImFwaSIsImRlZmF1bHQiLCJvcHRpb25zIiwibG9jYWxzIiwibWVtbyIsImlzT2xkSUUiLCJCb29sZWFuIiwid2luZG93IiwiYWxsIiwiYXRvYiIsImdldFRhcmdldCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsInN0eWxlc0luRG9tIiwiZ2V0SW5kZXhCeUlkZW50aWZpZXIiLCJpZGVudGlmaWVyIiwibW9kdWxlc1RvRG9tIiwiaWRDb3VudE1hcCIsImlkZW50aWZpZXJzIiwiYmFzZSIsImNvdW50IiwiaW5kZXgiLCJvYmoiLCJjc3MiLCJtZWRpYSIsInJlZmVyZW5jZXMiLCJ1cGRhdGVyIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibm9uY2UiLCJrZXlzIiwiZm9yRWFjaCIsInNldEF0dHJpYnV0ZSIsImluc2VydCIsIkVycm9yIiwidGV4dFN0b3JlIiwicmVwbGFjZVRleHQiLCJyZXBsYWNlbWVudCIsImZpbHRlciIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImFwcGx5VG9UYWciLCJyZW1vdmVBdHRyaWJ1dGUiLCJzaW5nbGV0b24iLCJzaW5nbGV0b25Db3VudGVyIiwidXBkYXRlIiwic3R5bGVJbmRleCIsInBhcmVudE5vZGUiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJuZXdPYmoiLCJsYXN0SWRlbnRpZmllcnMiLCJuZXdMaXN0IiwibmV3TGFzdElkZW50aWZpZXJzIiwiX2luZGV4Iiwic3BsaWNlIiwiX19fQ1NTX0xPQURFUl9FWFBPUlRfX18iXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFB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RkFBLEVBQVVBLEdBQVcsR0FFMkIsbUJBQTVDekssT0FBT2tCLFVBQVVNLFNBQVMvQixLQUFLZ0wsR0FBbkMsQ0FJQSxJQUFLLElBQUluTCxFQUFJLEVBQUdBLEVBQUlrTCxFQUFnQnZILE9BQVEzRCxJQUFLLENBQy9DLElBQ0krSSxFQUFRUCxFQURLMEMsRUFBZ0JsTCxJQUVqQ3VJLEVBQVlRLEdBQU9JLGFBS3JCLElBRkEsSUFBSWlDLEVBQXFCMUMsRUFBYXlDLEVBQVMxRCxHQUV0QzVELEVBQUssRUFBR0EsRUFBS3FILEVBQWdCdkgsT0FBUUUsSUFBTSxDQUNsRCxJQUVJd0gsRUFBUzdDLEVBRkswQyxFQUFnQnJILElBSUssSUFBbkMwRSxFQUFZOEMsR0FBUWxDLGFBQ3RCWixFQUFZOEMsR0FBUWpDLFVBRXBCYixFQUFZK0MsT0FBT0QsRUFBUSxJQUkvQkgsRUFBa0JFLE0sNkJDMVF0QixrQkFFSUcsRUFGSixNQUU4QixJQUE0QixHQUUxREEsRUFBd0J6SCxLQUFLLENBQUMvRCxFQUFPQyxFQUFJLG8vQkFBcS9CLEdBQUcsQ0FBQyxRQUFVLEVBQUUsUUFBVSxDQUFDLDJCQUEyQixNQUFRLEdBQUcsU0FBVyxpZUFBaWUsZUFBaUIsQ0FBQyxxL0JBQXEvQixXQUFhLE1BRWhsRiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXNlU291cmNlTWFwKSB7XG4gIHZhciBsaXN0ID0gW107IC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblxuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgcmV0dXJuIFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpLmNvbmNhdChjb250ZW50LCBcIn1cIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oJycpO1xuICB9OyAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXG5cbiAgbGlzdC5pID0gZnVuY3Rpb24gKG1vZHVsZXMsIG1lZGlhUXVlcnksIGRlZHVwZSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgJyddXTtcbiAgICB9XG5cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXG4gICAgaWYgKGRlZHVwZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuICAgICAgICB2YXIgaWQgPSB0aGlzW2ldWzBdO1xuXG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG1vZHVsZXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19pXSk7XG5cbiAgICAgIGlmIChkZWR1cGUgJiYgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udGludWVcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChtZWRpYVF1ZXJ5KSB7XG4gICAgICAgIGlmICghaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMl0gPSBcIlwiLmNvbmNhdChtZWRpYVF1ZXJ5LCBcIiBhbmQgXCIpLmNvbmNhdChpdGVtWzJdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcblxuICB2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICBpZiAodXNlU291cmNlTWFwICYmIHR5cGVvZiBidG9hID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSB0b0NvbW1lbnQoY3NzTWFwcGluZyk7XG4gICAgdmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgIHJldHVybiBcIi8qIyBzb3VyY2VVUkw9XCIuY29uY2F0KGNzc01hcHBpbmcuc291cmNlUm9vdCB8fCAnJykuY29uY2F0KHNvdXJjZSwgXCIgKi9cIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG4gIH1cblxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufSAvLyBBZGFwdGVkIGZyb20gY29udmVydC1zb3VyY2UtbWFwIChNSVQpXG5cblxuZnVuY3Rpb24gdG9Db21tZW50KHNvdXJjZU1hcCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSk7XG4gIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgcmV0dXJuIFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbn0iLCJpbXBvcnQgXCIuL2dhbWUudHNcIjtcclxuaW1wb3J0IFwiLi9zdHlsZS5jc3NcIjsiLCJpbnRlcmZhY2UgVGlsZSB7XHJcbiAgdmFsOiBzdHJpbmdcclxuICBlbDogSFRNTEVsZW1lbnRcclxufVxyXG5cclxuY2xhc3MgR2FtZSB7XHJcbiAgZ3JpZDogQXJyYXk8VGlsZT5cclxuICBncmlkX2VsOiBIVE1MRWxlbWVudFxyXG4gIGNvbnRyb2xzOiBIVE1MRWxlbWVudFxyXG4gIG1vdmVzOiBudW1iZXIgPSAwXHJcbiAgbW92ZXNfZGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZVxyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuZ3JpZCA9IFtdO1xyXG4gICAgdGhpcy5ncmlkX2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmlkXCIpO1xyXG4gICAgdGhpcy5jb250cm9scyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udHJvbHNcIik7XHJcbiAgfVxyXG5cclxuICBpbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5pbml0R3JpZCgpO1xyXG5cclxuICAgIGNvbnN0IHJlc3RhcnRfYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgIHJlc3RhcnRfYnRuLmlkID0gXCJyZXN0YXJ0XCI7XHJcbiAgICByZXN0YXJ0X2J0bi5pbm5lckhUTUwgPSBcItCf0LXRgNC10LzQtdGI0LDRgtGMXCI7XHJcbiAgICByZXN0YXJ0X2J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5yZXN0YXJ0LmJpbmQodGhpcykpO1xyXG5cclxuICAgIHRoaXMuY29udHJvbHMuYXBwZW5kQ2hpbGQocmVzdGFydF9idG4pO1xyXG4gIH1cclxuXHJcbiAgaW5pdEdyaWQoKTogdm9pZCB7XHJcbiAgICB0aGlzLm1vdmVzX2Rpc2FibGVkID0gZmFsc2U7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMTU7IGkrKykge1xyXG4gICAgICBjb25zdCBuZXdfZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgICAgbmV3X2VsLmNsYXNzTmFtZSA9IFwidGlsZVwiO1xyXG4gICAgICBuZXdfZWwuaW5uZXJIVE1MID0gU3RyaW5nKGkpO1xyXG4gICAgICBuZXdfZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlVGlsZUNsaWNrLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgdGhpcy5ncmlkLnB1c2goe1xyXG4gICAgICAgIHZhbDogU3RyaW5nKGkpLFxyXG4gICAgICAgIGVsOiBuZXdfZWxcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBibGFua19lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBibGFua19lbC5jbGFzc05hbWUgPSBcInRpbGUgdGlsZS1ibGFua1wiO1xyXG4gICAgYmxhbmtfZWwuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcbiAgICB0aGlzLmdyaWQucHVzaCh7XHJcbiAgICAgIHZhbDogXCJcIixcclxuICAgICAgZWw6IGJsYW5rX2VsXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICB0aGlzLnNodWZmbGUoKTtcclxuICAgIHRoaXMuZHJhd0dyaWQoKTtcclxuICB9XHJcblxyXG4gIG1ha2VNb3ZlKHRpbGVfMSwgdGlsZV8yLCBieV9wbGF5ZXI9dHJ1ZSk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMubW92ZXNfZGlzYWJsZWQpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIFt0aGlzLmdyaWRbdGlsZV8xXSwgdGhpcy5ncmlkW3RpbGVfMl1dID0gW3RoaXMuZ3JpZFt0aWxlXzJdLCB0aGlzLmdyaWRbdGlsZV8xXV07XHJcbiAgICBpZiAoYnlfcGxheWVyKSB7XHJcbiAgICAgIHRoaXMubW92ZXMrKztcclxuICAgICAgdGhpcy5kcmF3R3JpZCgpO1xyXG4gICAgICBpZiAodGhpcy5jaGVja1ZpY3RvcnkoKSkge1xyXG4gICAgICAgIHRoaXMud2luKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRyYXdHcmlkKCk6IHZvaWQge1xyXG4gICAgdGhpcy5ncmlkX2VsLmlubmVySFRNTCA9IFwiXCI7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA0OyBqKyspIHtcclxuICAgICAgICBsZXQgdGlsZSA9IHRoaXMuZ3JpZFsoaSAqIDQpICsgal1cclxuICAgICAgICBcclxuICAgICAgICB0aWxlLmVsLnN0eWxlLnRvcCA9IFN0cmluZyhpICogMTMwKSArIFwicHhcIjtcclxuICAgICAgICB0aWxlLmVsLnN0eWxlLmxlZnQgPSBTdHJpbmcoaiAqIDEzMCkgKyBcInB4XCI7XHJcbiAgICAgICAgdGhpcy5ncmlkX2VsLmFwcGVuZENoaWxkKHRpbGUuZWwpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNoZWNrVmljdG9yeSgpOiBib29sZWFuIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ncmlkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmIChpID09PSAxNSAmJiB0aGlzLmdyaWRbaV0udmFsID09PSBcIlwiKSB7XHJcbiAgICAgICAgY29udGludWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKE51bWJlcih0aGlzLmdyaWRbaV0udmFsKSAhPT0gaSArIDEpIHtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHdpbigpOiB2b2lkIHtcclxuICAgIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKSxcclxuICAgICAgICAgIG1vdmVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIiksXHJcbiAgICAgICAgICBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuICAgIGhlYWRlci5pZCA9IFwidmljdG9yeS1oZWFkXCI7XHJcbiAgICBoZWFkZXIuaW5uZXJIVE1MID0gXCLQn9C+0LHQtdC00LAhXCI7XHJcblxyXG4gICAgbW92ZXMuY2xhc3NOYW1lID0gXCJ2aWN0b3J5LXRleHRcIjtcclxuICAgIG1vdmVzLmlubmVySFRNTCA9IFwi0KXQvtC00L7QsiDRgdC00LXQu9Cw0L3QvjogXCIgKyB0aGlzLm1vdmVzO1xyXG5cclxuICAgIGNvbnRhaW5lci5pZCA9IFwidmljdG9yeS1jb250YWluZXJcIjtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChoZWFkZXIpO1xyXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG1vdmVzKTtcclxuXHJcbiAgICB0aGlzLm1vdmVzX2Rpc2FibGVkID0gdHJ1ZTtcclxuICAgIHRoaXMuY29udHJvbHMuaW5zZXJ0QmVmb3JlKGNvbnRhaW5lciwgdGhpcy5jb250cm9scy5maXJzdENoaWxkKTtcclxuICB9XHJcblxyXG4gIHJlc3RhcnQoKTogdm9pZCB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpY3RvcnktY29udGFpbmVyXCIpLnJlbW92ZSgpO1xyXG5cclxuICAgIHRoaXMuZ3JpZCA9IFtdO1xyXG4gICAgdGhpcy5tb3ZlcyA9IDA7XHJcbiAgICB0aGlzLmluaXRHcmlkKCk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVUaWxlQ2xpY2soZTogRXZlbnQpOiB2b2lkIHtcclxuICAgIGNvbnN0IGVsID0gPEhUTUxFbGVtZW50PiBlLnRhcmdldCxcclxuICAgICAgICAgIHRpbGVfaSA9IHRoaXMuZ2V0QnlWYWx1ZShlbC5pbm5lckhUTUwpLFxyXG4gICAgICAgICAgbmVpZ2hib3VycyA9IHRoaXMuZ2V0TmVpZ2hib3Vycyh0aWxlX2kpO1xyXG4gICAgXHJcbiAgICBsZXQgYmxhbmtfbmVpZ2hib3JfaTtcclxuXHJcbiAgICBpZiAodGhpcy5pc1RpbGVNb3ZhYmxlKG5laWdoYm91cnMpKSB7XHJcbiAgICAgIHRoaXMubWFrZU1vdmUodGlsZV9pLCB0aGlzLmdldEVtcHR5KCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaXNUaWxlTW92YWJsZShuZWlnaGJvdXJzOiBBcnJheTxUaWxlPik6IGJvb2xlYW4ge1xyXG4gICAgZm9yIChsZXQgaj0wOyBqPG5laWdoYm91cnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgaWYgKCFuZWlnaGJvdXJzW2pdLnZhbCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0QnlWYWx1ZSh2YWwpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuZ3JpZC5maW5kSW5kZXgodGlsZSA9PiB7XHJcbiAgICAgIHJldHVybiB0aWxlLnZhbCA9PT0gdmFsO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGdldEVtcHR5KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5ncmlkLmZpbmRJbmRleCh0aWxlID0+IHtcclxuICAgICAgcmV0dXJuIHRpbGUudmFsID09PSBcIlwiO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXROZWlnaGJvdXJzKGk6IG51bWJlcik6IEFycmF5PFRpbGU+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG5cclxuICAgIGlmIChpIDw9IDExKSB7IC8vIGJvdHRvbVxyXG4gICAgICByZXN1bHQucHVzaCh0aGlzLmdyaWRbaSArIDRdKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoKGkgKyAxKSAlIDQgIT09IDApIHsgLy8gcmlnaHRcclxuICAgICAgcmVzdWx0LnB1c2godGhpcy5ncmlkW2kgKyAxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGkgPj0gNCkgeyAvLyB0b3BcclxuICAgICAgcmVzdWx0LnB1c2godGhpcy5ncmlkW2kgLSA0XSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGkgJSA0ICE9PSAwKSB7IC8vIGxlZnRcclxuICAgICAgcmVzdWx0LnB1c2godGhpcy5ncmlkW2kgLSAxXSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBzaHVmZmxlKCk6IHZvaWQge1xyXG4gICAgbGV0IGVtcHR5X2k7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gMTAwMDsgaSsrKSB7XHJcbiAgICAgIHRoaXMubWFrZVNodWZmbGVNb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZW1wdHlfaSA9IHRoaXMuZ2V0RW1wdHkoKTtcclxuXHJcbiAgICB3aGlsZSAoKGVtcHR5X2kgKyAxKSAlIDQgIT09IDApIHtcclxuICAgICAgdGhpcy5tYWtlTW92ZShlbXB0eV9pLCBlbXB0eV9pICsgMSwgZmFsc2UpO1xyXG4gICAgICBlbXB0eV9pID0gZW1wdHlfaSArIDE7XHJcbiAgICB9XHJcblxyXG4gICAgd2hpbGUgKGVtcHR5X2kgPD0gMTEpIHtcclxuICAgICAgdGhpcy5tYWtlTW92ZShlbXB0eV9pLCBlbXB0eV9pICsgNCwgZmFsc2UpO1xyXG4gICAgICBlbXB0eV9pID0gZW1wdHlfaSArIDQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtYWtlU2h1ZmZsZU1vdmUoKTogdm9pZCB7XHJcbiAgICBjb25zdCBlbXB0eV9pID0gdGhpcy5nZXRFbXB0eSgpLFxyXG4gICAgICAgICAgbW92ZXMgPSB0aGlzLmdldE5laWdoYm91cnMoZW1wdHlfaSk7XHJcblxyXG4gICAgbGV0IHJhbmRvbSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1vdmVzLmxlbmd0aCk7XHJcblxyXG4gICAgdGhpcy5tYWtlTW92ZShlbXB0eV9pLCB0aGlzLmdldEJ5VmFsdWUobW92ZXNbcmFuZG9tXS52YWwpLCBmYWxzZSk7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBnYW1lID0gbmV3IEdhbWUoKTtcclxuZ2FtZS5pbml0KCk7IiwidmFyIGFwaSA9IHJlcXVpcmUoXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3N0eWxlLmNzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbm1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHMgfHwge307IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcbiAgdmFyIG1lbW87XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSgpIHtcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuICAgICAgLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtbztcbiAgfTtcbn0oKTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgdmFyIG1lbW8gPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xuICB9O1xufSgpO1xuXG52YXIgc3R5bGVzSW5Eb20gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRvbS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRvbVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdXG4gICAgfTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZXNJbkRvbS5wdXNoKHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogYWRkU3R5bGUob2JqLCBvcHRpb25zKSxcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgdmFyIGF0dHJpYnV0ZXMgPSBvcHRpb25zLmF0dHJpYnV0ZXMgfHwge307XG5cbiAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIGF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5tZWRpYSA/IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIikuY29uY2F0KG9iai5jc3MsIFwifVwiKSA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlKCdtZWRpYScpO1xuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiBidG9hKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobmV3TGlzdCkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5Eb21bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRG9tW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRG9tLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKHRydWUpO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiaHRtbCB7XFxyXFxuICBmb250LWZhbWlseTogVmVyZGFuYSxHZW5ldmEsc2Fucy1zZXJpZjtcXHJcXG59XFxyXFxuXFxyXFxuI2dhbWUge1xcclxcbiAgZGlzcGxheTogZmxleDtcXHJcXG59XFxyXFxuXFxyXFxuI2dyaWQge1xcclxcbiAgd2lkdGg6IDUxOHB4O1xcclxcbiAgaGVpZ2h0OiA1MThweDtcXHJcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG59XFxyXFxuXFxyXFxuLnRpbGUge1xcclxcbiAgd2lkdGg6IDEyOHB4O1xcclxcbiAgaGVpZ2h0OiAxMjhweDtcXHJcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gIGRpc3BsYXk6IGZsZXg7XFxyXFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXHJcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxyXFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcclxcbiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XFxyXFxuICBib3JkZXItcmFkaXVzOiA1cHg7XFxyXFxufVxcclxcblxcclxcbi50aWxlLWJsYW5rIHtcXHJcXG4gIGJvcmRlcjogbm9uZTtcXHJcXG59XFxyXFxuXFxyXFxuI2NvbnRyb2xzIHtcXHJcXG4gIHdpZHRoOiAyNTBweDtcXHJcXG4gIGRpc3BsYXk6IGZsZXg7XFxyXFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcclxcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxyXFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcclxcbiAgbWFyZ2luLWxlZnQ6IDUwcHg7XFxyXFxufVxcclxcblxcclxcbiN2aWN0b3J5LWNvbnRhaW5lciB7XFxyXFxuICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXHJcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcclxcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXHJcXG59XFxyXFxuXFxyXFxuI3Jlc3RhcnQge1xcclxcbiAgcGFkZGluZzogNHB4IDE1cHg7XFxyXFxuICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcXHJcXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcXHJcXG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xcclxcbiAgZm9udC1zaXplOiAxN3B4O1xcclxcbiAgY3Vyc29yOiBwb2ludGVyO1xcclxcbn1cXHJcXG5cXHJcXG4udmljdG9yeS10ZXh0IHtcXHJcXG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XFxyXFxufVwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly9zcmMvc3R5bGUuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBO0VBQ0Usc0NBQXNDO0FBQ3hDOztBQUVBO0VBQ0UsYUFBYTtBQUNmOztBQUVBO0VBQ0UsWUFBWTtFQUNaLGFBQWE7RUFDYixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osYUFBYTtFQUNiLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2IsdUJBQXVCO0VBQ3ZCLG1CQUFtQjtFQUNuQixzQkFBc0I7RUFDdEIsdUJBQXVCO0VBQ3ZCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLFlBQVk7QUFDZDs7QUFFQTtFQUNFLFlBQVk7RUFDWixhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLHVCQUF1QjtFQUN2QixtQkFBbUI7RUFDbkIsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtFQUN0Qix1QkFBdUI7RUFDdkIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsaUJBQWlCO0VBQ2pCLHVCQUF1QjtFQUN2QixrQkFBa0I7RUFDbEIsdUJBQXVCO0VBQ3ZCLGVBQWU7RUFDZixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCXCIsXCJzb3VyY2VzQ29udGVudFwiOltcImh0bWwge1xcclxcbiAgZm9udC1mYW1pbHk6IFZlcmRhbmEsR2VuZXZhLHNhbnMtc2VyaWY7XFxyXFxufVxcclxcblxcclxcbiNnYW1lIHtcXHJcXG4gIGRpc3BsYXk6IGZsZXg7XFxyXFxufVxcclxcblxcclxcbiNncmlkIHtcXHJcXG4gIHdpZHRoOiA1MThweDtcXHJcXG4gIGhlaWdodDogNTE4cHg7XFxyXFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxufVxcclxcblxcclxcbi50aWxlIHtcXHJcXG4gIHdpZHRoOiAxMjhweDtcXHJcXG4gIGhlaWdodDogMTI4cHg7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICBkaXNwbGF5OiBmbGV4O1xcclxcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxyXFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcclxcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXHJcXG4gIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xcclxcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xcclxcbn1cXHJcXG5cXHJcXG4udGlsZS1ibGFuayB7XFxyXFxuICBib3JkZXI6IG5vbmU7XFxyXFxufVxcclxcblxcclxcbiNjb250cm9scyB7XFxyXFxuICB3aWR0aDogMjUwcHg7XFxyXFxuICBkaXNwbGF5OiBmbGV4O1xcclxcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXHJcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcclxcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXHJcXG4gIG1hcmdpbi1sZWZ0OiA1MHB4O1xcclxcbn1cXHJcXG5cXHJcXG4jdmljdG9yeS1jb250YWluZXIge1xcclxcbiAgZGlzcGxheTogZmxleDtcXHJcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxyXFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXHJcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxyXFxufVxcclxcblxcclxcbiNyZXN0YXJ0IHtcXHJcXG4gIHBhZGRpbmc6IDRweCAxNXB4O1xcclxcbiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XFxyXFxuICBib3JkZXItcmFkaXVzOiA1cHg7XFxyXFxuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcXHJcXG4gIGZvbnQtc2l6ZTogMTdweDtcXHJcXG4gIGN1cnNvcjogcG9pbnRlcjtcXHJcXG59XFxyXFxuXFxyXFxuLnZpY3RvcnktdGV4dCB7XFxyXFxuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xcclxcbn1cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IF9fX0NTU19MT0FERVJfRVhQT1JUX19fO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==